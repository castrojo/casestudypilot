# CNCF Case Study Automation - Design Document

**Date:** February 9, 2026  
**Status:** âœ… Implemented (Phase 1 Complete)  
**Version:** 2.1 (Simplified - No API Key Required)

---

> **ğŸ‰ IMPLEMENTATION UPDATE (Feb 9, 2026):**  
> Design has been implemented with one major simplification:  
> **Removed YouTube Data API requirement** - now uses `youtube-transcript-api` which needs no authentication.  
> This eliminates setup friction while maintaining full functionality.  
> See `docs/IMPLEMENTATION.md` for complete details.

---

## Table of Contents

1. [Overview](#overview)
2. [Architecture](#architecture)
3. [File Structure](#file-structure)
4. [Component Specifications](#component-specifications)
5. [Workflow Execution](#workflow-execution)
6. [Secrets Management](#secrets-management)
7. [Testing Strategy](#testing-strategy)
8. [Implementation Timeline](#implementation-timeline)
9. [Quality Criteria](#quality-criteria)
10. [References](#references)

---

## Overview

### Purpose

Automate the creation of CNCF end-user case studies from KubeCon YouTube videos using **GitHub Copilot Custom Agents** and minimal Python tools.

**Goal:** GitHub issue with YouTube URL â†’ Automated pull request with publication-ready case study

### Architecture Decision

**Approach:** Copilot Agent-Centric Architecture
- **Custom Agent** orchestrates entire workflow
- **Agent Skills** provide AI processing capabilities
- **Python Tools** handle data fetching and validation
- **GitHub Actions** provides execution environment

### Key Features

- âœ… Minimal Python code (~300 lines total)
- âœ… GitHub Copilot handles all AI tasks (transcript correction, analysis, content generation)
- âœ… Automatic model selection (GPT-4, Claude, Gemini, etc.)
- âœ… Secrets managed via GitHub environment
- âœ… Manual testing in GitHub web UI
- âœ… Integration tests only (pragmatic approach)

### Test Video

**URL:** https://www.youtube.com/watch?v=V6L-xOUdoRQ  
**Title:** "How Intuit Manages Cloud Resources Via GitOps"  
**Company:** Intuit (CNCF end-user member)  
**Speakers:** Jerome Kuptz & Ameen Radwan  
**Projects:** Kubernetes, Argo CD, Helm  
**Expected:** 3+ metrics, quality score â‰¥ 0.70

---

## Architecture

### High-Level Flow

```
GitHub Issue (YouTube URL)
         â†“
User assigns to @case-study-agent
         â†“
GitHub Actions (copilot environment)
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                          â†“
Agent Skills           Python Tools
(AI Processing)      (Data Fetching)
    â†“                          â†“
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
   Pull Request
         â†“
  Manual Review & Merge
```

### Division of Responsibility

| Component | Responsibility | Implementation |
|-----------|---------------|----------------|
| **Custom Agent** | Orchestrate entire workflow | `.github/agents/case-study-agent.md` |
| **Agent Skills** | AI processing (correction, analysis, generation) | `.github/skills/*/SKILL.md` |
| **Python Tools** | Data fetching, validation, assembly | `casestudypilot/*.py` |
| **GitHub Actions** | Execution environment setup | `.github/workflows/copilot-setup-steps.yml` |
| **Secrets** | API keys, tokens | GitHub Secrets (copilot environment) |

### Design Principles

1. **Simplicity First** - Minimal code, maximum leverage of Copilot
2. **Agent-Centric** - Agent orchestrates, not GitHub Actions
3. **Fail-Fast** - Early validation prevents wasted processing
4. **Manual Testing** - Test in GitHub web UI, not automated tests for skills
5. **Integration Over Units** - Focus on end-to-end behavior

---

## File Structure

```
casestudypilot/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ case-study-agent.md              # Custom agent definition
â”‚   â”‚
â”‚   â”œâ”€â”€ skills/
â”‚   â”‚   â”œâ”€â”€ transcript-correction/
â”‚   â”‚   â”‚   â””â”€â”€ SKILL.md                     # Fix speech-to-text errors
â”‚   â”‚   â”œâ”€â”€ transcript-analysis/
â”‚   â”‚   â”‚   â””â”€â”€ SKILL.md                     # Extract projects, metrics, sections
â”‚   â”‚   â””â”€â”€ case-study-generation/
â”‚   â”‚       â””â”€â”€ SKILL.md                     # Generate case study content
â”‚   â”‚
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ copilot-setup-steps.yml         # Python environment setup
â”‚   â”‚   â””â”€â”€ validate-pr.yml                 # Optional: PR validation
â”‚   â”‚
â”‚   â””â”€â”€ copilot-instructions.md             # Repository-wide instructions
â”‚
â”œâ”€â”€ casestudypilot/                          # Python package
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ __main__.py                          # CLI entry point (typer)
â”‚   â”œâ”€â”€ youtube_client.py                    # ~100 lines
â”‚   â”œâ”€â”€ company_verifier.py                  # ~80 lines
â”‚   â”œâ”€â”€ assembler.py                         # ~50 lines
â”‚   â””â”€â”€ validator.py                         # ~50 lines
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ case_study.md.j2                     # Jinja2 template
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_youtube_client.py
â”‚   â”œâ”€â”€ test_company_verifier.py
â”‚   â”œâ”€â”€ test_assembler.py
â”‚   â”œâ”€â”€ test_validator.py
â”‚   â””â”€â”€ test_integration.py                  # ~15 integration tests
â”‚
â”œâ”€â”€ case-studies/                            # Generated case studies (PR target)
â”‚
â”œâ”€â”€ .env.example                             # Example environment variables
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt                         # Python dependencies
â”œâ”€â”€ pytest.ini                               # Pytest configuration
â”œâ”€â”€ README.md
â””â”€â”€ Makefile                                 # Common commands
```

**Total Python Code:** ~300 lines  
**Total Files:** ~20 files

---

## Component Specifications

### 1. Custom Agent: `.github/agents/case-study-agent.md`

**Purpose:** Orchestrate entire case study generation workflow

**Format:** Markdown with YAML frontmatter

```yaml
---
name: case-study-agent
description: Automates CNCF case study generation from KubeCon YouTube videos
tools: ["read", "edit", "search", "execute"]
---
```

**Key Responsibilities:**
1. Parse YouTube URL from issue body
2. Execute Python tools to fetch/validate data
3. Apply Agent Skills for AI processing
4. Assemble final case study markdown
5. Validate quality
6. Create pull request

**Tool Execution:**
- Uses `execute` tool to run Python CLI commands
- Reads/writes JSON files for data passing
- Creates branches and commits
- Posts PR link to issue

**Error Handling:**
- Stop if company verification fails
- Stop if quality score < 0.60
- Report errors in issue comments

---

### 2. Agent Skills: `.github/skills/*/SKILL.md`

#### Skill: transcript-correction

**Location:** `.github/skills/transcript-correction/SKILL.md`

**Purpose:** Fix speech-to-text errors in YouTube captions

**Input:** Raw transcript text (string)

**Output:** Corrected transcript (plain text)

**Key Rules:**
- Fix CNCF project capitalization (kubernetes â†’ Kubernetes)
- Correct common errors (cueectl â†’ kubectl)
- Preserve code blocks, company names, URLs
- Do NOT rephrase sentences

**CNCF Projects to Correct:**
- kubernetes â†’ Kubernetes
- prometheus â†’ Prometheus
- argo cd â†’ Argo CD
- helm â†’ Helm
- istio â†’ Istio
- cilium â†’ Cilium
- envoy â†’ Envoy
- linkerd â†’ Linkerd
- fluentd â†’ Fluentd
- jaeger â†’ Jaeger
- etcd â†’ etcd (correct)
- kubectl â†’ kubectl (correct)

**Common Errors:**
- cueectl â†’ kubectl
- cube ctl â†’ kubectl
- micro services â†’ microservices
- git ops â†’ GitOps
- dev sec ops â†’ DevSecOps

---

#### Skill: transcript-analysis

**Location:** `.github/skills/transcript-analysis/SKILL.md`

**Purpose:** Extract structured information from transcript

**Input:** Corrected transcript (string)

**Output:** JSON with projects, metrics, section classifications

**Tasks:**
1. **Identify CNCF Projects** - Find all mentions (case-insensitive)
2. **Extract Metrics** - Quantitative achievements:
   - Percentages: "50% reduction", "3x increase"
   - Time savings: "2 hours to 15 minutes"
   - Scale: "10,000 pods", "1M requests/sec"
   - Cost: "$100,000 saved"
   - Reliability: "99.99% uptime"
3. **Classify Sentences into Sections:**
   - **Background**: "We are...", "Our company...", "We work with..."
   - **Challenge**: "The problem...", "We faced...", "Difficulty..."
   - **Solution**: "We implemented...", "We adopted...", "We deployed..."
   - **Impact**: "We achieved...", "We saw...", "Improvement..."

**Output Format:**
```json
{
  "projects": ["Kubernetes", "Argo CD", "Helm"],
  "metrics": [
    {
      "type": "percentage",
      "value": "50%",
      "context": "reduction in deployment time"
    },
    {
      "type": "scale",
      "value": "10,000",
      "unit": "pods",
      "context": "across production"
    }
  ],
  "sections": {
    "background": ["sentence 1", "sentence 2"],
    "challenge": ["sentence X"],
    "solution": ["sentence Y"],
    "impact": ["sentence Z"]
  }
}
```

---

#### Skill: case-study-generation

**Location:** `.github/skills/case-study-generation/SKILL.md`

**Purpose:** Generate publication-ready case study content

**Input:** Analysis JSON + video metadata

**Output:** JSON with markdown sections

**Style Requirements:**
- **Tone**: Professional, technical, factual
- **Length**: 500-1500 words total
- **Paragraphs**: 3-5 sentences each
- **Active voice**: Preferred
- **Metrics**: Bold key numbers

**Section Specifications:**

**Background (2-3 paragraphs):**
- Company overview and industry
- Business scale and context
- Why cloud-native matters

**Challenge (1-2 paragraphs + bullets):**
```markdown
Paragraph describing context.

Key challenges:
- Challenge 1
- Challenge 2
- Challenge 3
```

**Solution (2-3 paragraphs):**
- CNCF technologies adopted
- Implementation approach
- Architecture changes
- Bold project names: **Kubernetes**, **Argo CD**

**Impact (1-2 paragraphs + bullets):**
```markdown
Paragraph describing overall impact.

Key improvements:
- **50% reduction** in deployment time
- **3x increase** in throughput
- **$100,000** annual cost savings
```

**Reference Examples:**
- https://www.cncf.io/case-studies/intuit/
- https://www.cncf.io/case-studies/adobe/
- https://www.cncf.io/case-studies/spotify/

**Output Format:**
```json
{
  "background": "Markdown content...",
  "challenge": "Markdown content...",
  "solution": "Markdown content...",
  "impact": "Markdown content..."
}
```

---

### 3. Python Tools: `casestudypilot/*.py`

All tools are CLI-based using **Typer** framework:

```bash
python -m casestudypilot <command> [options]
```

#### Tool: youtube-data

**File:** `casestudypilot/youtube_client.py`

**Command:**
```bash
python -m casestudypilot youtube-data V6L-xOUdoRQ
```

**Purpose:** Fetch video metadata and transcript

**Output:** `video_data.json`

**Structure:**
```json
{
  "video_id": "V6L-xOUdoRQ",
  "url": "https://www.youtube.com/watch?v=V6L-xOUdoRQ",
  "title": "How Intuit Manages Cloud Resources Via GitOps",
  "description": "...",
  "speakers": ["Jerome Kuptz", "Ameen Radwan"],
  "company": "Intuit",
  "transcript": "Full transcript text...",
  "published_at": "2024-03-15",
  "duration_seconds": 1800,
  "channel_name": "CNCF [Cloud Native Computing Foundation]"
}
```

**Implementation:**
- Use `google-api-python-client` for metadata
- Use `youtube-transcript-api` for captions (no quota)
- Parse speakers/company from title using regex
- Environment variable: `YOUTUBE_API_KEY` (from secrets)

**Error Handling:**
- Video not found â†’ Exit with error
- Not CNCF channel â†’ Exit with error
- No captions available â†’ Exit with error

---

#### Tool: verify-company

**File:** `casestudypilot/company_verifier.py`

**Command:**
```bash
python -m casestudypilot verify-company "Intuit"
```

**Purpose:** Verify company is CNCF end-user member

**Output:** `company_verification.json`

**Structure:**
```json
{
  "query_name": "Intuit",
  "is_member": true,
  "matched_name": "Intuit",
  "confidence": 0.98,
  "match_method": "exact"
}
```

**Implementation:**
- Fetch `https://raw.githubusercontent.com/cncf/landscape/master/landscape.yml`
- Parse "End User Supporter" section
- Fuzzy match with `rapidfuzz` (Levenshtein distance)
- Normalize names (lowercase, remove "Inc.", "Ltd.", etc.)

**Match Methods:**
- **exact**: Perfect match (confidence 1.0)
- **fuzzy**: Levenshtein distance â‰¤ 2 (confidence 0.70-0.99)
- **alias**: Match via known alias (confidence 0.90-0.99)

**Decision Logic:**
- confidence â‰¥ 0.70 â†’ Accept
- confidence < 0.70 â†’ Reject

**Exit Codes:**
- 0: Company is member
- 1: Company is NOT member

---

#### Tool: assemble

**File:** `casestudypilot/assembler.py`

**Command:**
```bash
python -m casestudypilot assemble --data analysis.json --video video_data.json
```

**Purpose:** Render final case study markdown

**Output:** `case-studies/<company>.md`

**Implementation:**
- Load Jinja2 template: `templates/case_study.md.j2`
- Merge analysis JSON + video metadata
- Render template
- Write to `case-studies/` directory

**Template Variables:**
- `{{ company }}`
- `{{ background }}`
- `{{ challenge }}`
- `{{ solution }}`
- `{{ impact }}`
- `{{ projects }}` (list)
- `{{ video_url }}`
- `{{ speakers }}` (list)
- `{{ date }}`

---

#### Tool: validate

**File:** `casestudypilot/validator.py`

**Command:**
```bash
python -m casestudypilot validate case-studies/intuit.md
```

**Purpose:** Validate case study quality

**Output:** Quality score + warnings (to stdout)

**Validation Rules:**

| Rule | Severity | Threshold | Score Impact |
|------|----------|-----------|--------------|
| Background present | Error | Required | -0.25 if missing |
| Challenge present | Error | Required | -0.25 if missing |
| Solution present | Error | Required | -0.25 if missing |
| Impact present | Error | Required | -0.25 if missing |
| Projects mentioned | Error | â‰¥ 2 | -0.15 if < 2 |
| Metrics present | Warning | â‰¥ 1 | -0.10 if 0 |
| Word count | Warning | 500-1500 | -0.05 if outside range |

**Quality Score Calculation:**
```
Base Score: 1.0
- Deduct for each missing/invalid element
- Final Score: max(0.0, calculated_score)
```

**Decision Logic:**
- Score â‰¥ 0.60 â†’ Accept
- Score < 0.60 â†’ Reject

**Exit Codes:**
- 0: Quality acceptable
- 1: Quality too low

---

### 4. GitHub Actions: `.github/workflows/copilot-setup-steps.yml`

**Purpose:** Set up Python environment for agent execution

**Trigger:** Automatic (when agent starts work)

**Job Name:** `copilot-setup-steps` (REQUIRED NAME)

**Steps:**
1. Checkout code
2. Set up Python 3.11
3. Install dependencies from `requirements.txt`
4. Verify tools work

**Environment:** `copilot` (for secrets access)

**Full Configuration:**
```yaml
name: "Copilot Setup Steps"

on:
  workflow_dispatch:
  push:
    paths:
      - .github/workflows/copilot-setup-steps.yml
      - requirements.txt

jobs:
  copilot-setup-steps:
    runs-on: ubuntu-latest
    
    permissions:
      contents: read
    
    environment: copilot
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'
      
      - name: Install dependencies
        run: |
          pip install --upgrade pip
          pip install -r requirements.txt
      
      - name: Verify CLI works
        run: |
          python -m casestudypilot --help
        env:
          YOUTUBE_API_KEY: ${{ secrets.COPILOT_MCP_YOUTUBE_API_KEY }}
```

---

### 5. Repository Instructions: `.github/copilot-instructions.md`

**Purpose:** Provide repository-wide context to all agents

**Content:**
- Project overview
- Python tools usage
- Secrets management
- Testing commands
- Critical rules

**Key Sections:**

**Python Tools Usage:**
```bash
# Fetch YouTube data
python -m casestudypilot youtube-data <video-id>

# Verify company
python -m casestudypilot verify-company <company-name>

# Assemble case study
python -m casestudypilot assemble --data analysis.json --video video_data.json

# Validate quality
python -m casestudypilot validate case-studies/<company>.md
```

**Critical Rules:**
1. Always use `GITHUB_TOKEN` for API rate limiting
2. Stop early if company verification fails
3. Include quality score in PR description
4. Target quality score: â‰¥ 0.60
5. Test video: https://www.youtube.com/watch?v=V6L-xOUdoRQ

---

## Workflow Execution

### Complete Flow (Step by Step)

**Step 1: User Creates Issue**
```markdown
Title: Generate case study for Intuit GitOps talk
Body: https://www.youtube.com/watch?v=V6L-xOUdoRQ
```

**Step 2: User Assigns to Agent**
- Assign issue to: `@case-study-agent`
- Or comment: `@case-study-agent please process this video`

**Step 3: GitHub Actions Environment Setup**
- Workflow `copilot-setup-steps.yml` runs automatically
- Installs Python 3.11
- Installs dependencies from `requirements.txt`
- Verifies CLI works

**Step 4: Agent Wakes Up**
- Loads `.github/agents/case-study-agent.md`
- Loads `.github/copilot-instructions.md`
- Loads skills from `.github/skills/*/SKILL.md`

**Step 5: Agent Extracts Video ID**
- Parses issue body
- Extracts: `V6L-xOUdoRQ`

**Step 6: Agent Fetches Video Data**
```bash
python -m casestudypilot youtube-data V6L-xOUdoRQ
```
- Creates `video_data.json`
- Reads transcript, metadata, speakers, company

**Step 7: Agent Verifies Company**
```bash
python -m casestudypilot verify-company "Intuit"
```
- Creates `company_verification.json`
- Checks CNCF Landscape membership
- **STOPS if not end-user member or confidence < 0.70**

**Step 8: Agent Applies transcript-correction Skill**
- Input: Raw transcript from `video_data.json`
- Skill fixes capitalization, common errors
- Output: Corrected transcript (string)

**Step 9: Agent Applies transcript-analysis Skill**
- Input: Corrected transcript
- Skill extracts projects, metrics, sections
- Output: `analysis.json`

**Step 10: Agent Applies case-study-generation Skill**
- Input: `analysis.json` + `video_data.json`
- Skill generates Background, Challenge, Solution, Impact
- Output: `sections.json`

**Step 11: Agent Assembles Markdown**
```bash
python -m casestudypilot assemble --data sections.json --video video_data.json
```
- Creates `case-studies/intuit.md`

**Step 12: Agent Validates Quality**
```bash
python -m casestudypilot validate case-studies/intuit.md
```
- Checks all sections present
- Checks projects, metrics, word count
- Calculates quality score
- **STOPS if score < 0.60**

**Step 13: Agent Creates Pull Request**
- Creates branch: `case-study-intuit-V6L-xOUdoRQ`
- Commits: `case-studies/intuit.md`
- Creates PR with description:

```markdown
# Case Study: Intuit

Generated from: https://www.youtube.com/watch?v=V6L-xOUdoRQ

## Metadata
- **Company:** Intuit
- **Speakers:** Jerome Kuptz, Ameen Radwan
- **Projects:** Kubernetes, Argo CD, Helm
- **Metrics:** 3 quantitative improvements

## Quality Score: 0.78
- âœ… All sections present
- âœ… 3 CNCF projects mentioned
- âœ… 3 metrics included
- âœ… Word count: 1,234

## Review Checklist
- [ ] Verify technical accuracy
- [ ] Check company/speaker names
- [ ] Validate metrics
- [ ] Review tone and style
```

**Step 14: Agent Posts to Issue**
- Comments on original issue:
```markdown
âœ… Case study generated! Please review: #123
```

**Step 15: Human Reviews PR**
- User reviews in GitHub web UI
- Makes edits if needed
- Approves PR

**Step 16: Human Merges PR**
- User clicks "Merge pull request"
- Case study published to `case-studies/intuit.md`

---

### Error Handling

**Error: Video Not Found**
```
Agent posts to issue:
âŒ Error: Video not found or not accessible
Please check the URL and try again.
```

**Error: Not CNCF Channel**
```
Agent posts to issue:
âŒ Error: Video is not from CNCF YouTube channel
Expected channel: CNCF [Cloud Native Computing Foundation]
Found: <channel-name>
```

**Error: Company Not End-User Member**
```
Agent posts to issue:
âŒ Error: Company is not a CNCF end-user member
Company: <name>
Confidence: <score>

Please verify the company name or check CNCF Landscape:
https://landscape.cncf.io
```

**Error: Quality Score Too Low**
```
Agent posts to issue:
âš ï¸ Warning: Generated case study quality score too low
Score: 0.45 (minimum: 0.60)

Issues:
- Missing metrics
- Solution section too short (28 words, minimum 50)

The agent will not create a PR. Please try with a different video.
```

---

## Secrets Management

### GitHub Secrets

**Location:** Repository Settings â†’ Environments â†’ `copilot`

**Required Secrets:**

| Secret Name | Purpose | How to Get |
|-------------|---------|-----------|
| `COPILOT_MCP_YOUTUBE_API_KEY` | YouTube Data API v3 access | Google Cloud Console â†’ APIs & Services â†’ Credentials |

**Optional Secrets:**

| Secret Name | Purpose | Default |
|-------------|---------|---------|
| `GITHUB_TOKEN` | GitHub API access (rate limiting) | Automatic (provided by GitHub) |

### YouTube API Key Setup

**Step 1: Create Google Cloud Project**
1. Go to https://console.cloud.google.com
2. Create new project: "casestudypilot"

**Step 2: Enable YouTube Data API v3**
1. APIs & Services â†’ Library
2. Search "YouTube Data API v3"
3. Click "Enable"

**Step 3: Create API Key**
1. APIs & Services â†’ Credentials
2. Create Credentials â†’ API Key
3. Copy API key

**Step 4: Add to GitHub Secrets**
1. Repository â†’ Settings â†’ Environments
2. Select or create `copilot` environment
3. Add secret:
   - Name: `COPILOT_MCP_YOUTUBE_API_KEY`
   - Value: <paste API key>

### Rate Limiting

**YouTube API Quota:**
- Default: 10,000 units/day
- Metadata fetch: 1 unit per video
- Expected usage: ~50 videos/day = 50 units
- **No quota issues expected**

**GitHub API:**
- Uses `GITHUB_TOKEN` (automatic)
- 5,000 requests/hour for authenticated requests
- Expected usage: ~10 requests/video
- **No rate limiting issues expected**

---

## Testing Strategy

### Philosophy

**Integration Tests Only** - Focus on end-to-end behavior, not unit tests

**Manual Testing** - Test Agent Skills in GitHub web UI

**Test Video** - Use known good video for validation

### Integration Tests (~15 tests)

**File:** `tests/test_integration.py`

**Test Cases:**

1. **YouTube Client Tests:**
   - `test_youtube_client_fetches_intuit_video()` - Fetch test video
   - `test_youtube_client_extracts_speakers()` - Parse speakers from title
   - `test_youtube_client_extracts_company()` - Parse company from title
   - `test_youtube_client_gets_transcript()` - Fetch captions

2. **Company Verifier Tests:**
   - `test_company_verifier_exact_match()` - "Intuit" â†’ found
   - `test_company_verifier_fuzzy_match()` - "Intuit Inc" â†’ found
   - `test_company_verifier_not_member()` - "FakeCompany" â†’ not found
   - `test_company_verifier_confidence_score()` - Validate scoring

3. **Assembler Tests:**
   - `test_assembler_renders_complete_markdown()` - All sections present
   - `test_assembler_includes_metadata()` - Video URL, speakers, date

4. **Validator Tests:**
   - `test_validator_detects_missing_sections()` - Error on missing section
   - `test_validator_detects_short_sections()` - Warning on short content
   - `test_validator_calculates_quality_score()` - Validate scoring logic

5. **End-to-End Test:**
   - `test_full_pipeline_with_test_video()` - Complete workflow
   - `test_cli_commands_work()` - All CLI commands execute

### Test Fixtures

**Location:** `tests/fixtures/`

**Contents:**
- `test_video_metadata.json` - Sample video data
- `test_transcript.txt` - Sample transcript
- `test_landscape.yml` - Mock CNCF Landscape
- `test_analysis.json` - Sample analysis output
- `expected_case_study.md` - Golden file

### Running Tests

**Run all tests:**
```bash
pytest tests/ -v
```

**Run specific test:**
```bash
pytest tests/test_youtube_client.py -v
```

**Run with coverage:**
```bash
pytest tests/ --cov=casestudypilot --cov-report=html
```

**Expected Coverage:** ~70-80% (integration tests don't need 100%)

### Manual Testing Agent Skills

**Test Transcript Correction:**
1. Create issue with test video URL
2. Assign to `@case-study-agent`
3. Check PR for correct project capitalization
4. Verify no rephrasing occurred

**Test Transcript Analysis:**
1. Check `analysis.json` in PR files
2. Verify projects extracted correctly
3. Verify metrics extracted correctly
4. Verify sections classified correctly

**Test Case Study Generation:**
1. Review generated markdown in PR
2. Check tone and style
3. Verify all sections present
4. Verify metrics bolded

---

## Implementation Timeline

### Phase 1: Foundation (Days 1-3)

**Day 1: Project Setup**
- [x] Create repository structure
- [ ] Create `requirements.txt`
- [ ] Create `pyproject.toml` (optional)
- [ ] Create `.gitignore`
- [ ] Create `README.md`
- [ ] Set up GitHub Secrets

**Day 2-3: Python Tools - Part 1**
- [ ] Implement `casestudypilot/__init__.py`
- [ ] Implement `casestudypilot/__main__.py` (Typer CLI)
- [ ] Implement `youtube_client.py`
- [ ] Implement `company_verifier.py`
- [ ] Write tests for YouTube client
- [ ] Write tests for company verifier

**Milestone 1:** Python data fetching works

---

### Phase 2: Python Tools Complete (Days 4-5)

**Day 4: Python Tools - Part 2**
- [ ] Implement `assembler.py`
- [ ] Implement `validator.py`
- [ ] Create `templates/case_study.md.j2`
- [ ] Write tests for assembler
- [ ] Write tests for validator

**Day 5: Integration Testing**
- [ ] Write end-to-end integration test
- [ ] Test with real YouTube API
- [ ] Test with real CNCF Landscape
- [ ] Fix any bugs

**Milestone 2:** All Python tools tested and working

---

### Phase 3: Agent Setup (Days 6-8)

**Day 6: GitHub Actions Environment**
- [ ] Create `.github/workflows/copilot-setup-steps.yml`
- [ ] Test workflow runs successfully
- [ ] Verify Python environment works
- [ ] Verify secrets accessible

**Day 7: Custom Agent**
- [ ] Create `.github/agents/case-study-agent.md`
- [ ] Define agent tools and instructions
- [ ] Create `.github/copilot-instructions.md`
- [ ] Test agent can be assigned to issues

**Day 8: Agent Skills - Part 1**
- [ ] Create `.github/skills/transcript-correction/SKILL.md`
- [ ] Create `.github/skills/transcript-analysis/SKILL.md`
- [ ] Define skill instructions and examples

**Milestone 3:** Agent infrastructure ready

---

### Phase 4: Agent Skills Complete (Days 9-10)

**Day 9: Agent Skills - Part 2**
- [ ] Create `.github/skills/case-study-generation/SKILL.md`
- [ ] Refine all skill instructions
- [ ] Add examples to skills

**Day 10: Agent Integration**
- [ ] Test agent with test video (manual)
- [ ] Verify agent executes Python tools
- [ ] Verify agent applies skills
- [ ] Verify agent creates PR

**Milestone 4:** Agent can generate case studies

---

### Phase 5: Refinement (Days 11-12)

**Day 11: Testing & Bug Fixes**
- [ ] Run full pipeline with test video
- [ ] Test error handling (bad URL, not member, etc.)
- [ ] Fix any bugs
- [ ] Improve error messages

**Day 12: Documentation**
- [ ] Update README with usage instructions
- [ ] Add examples to documentation
- [ ] Document troubleshooting steps
- [ ] Create user guide

**Milestone 5:** Production ready

---

### Phase 6: Polish (Days 13-15)

**Day 13-14: Refinement (Optional)**
- [ ] Improve skill instructions based on testing
- [ ] Add more test cases
- [ ] Optimize quality validator
- [ ] Improve case study template

**Day 15: Buffer**
- [ ] Address any remaining issues
- [ ] Final testing
- [ ] Deploy to production

**Final Milestone:** System live and generating case studies

---

## Quality Criteria

### Functional Requirements

| Requirement | Status | Validation |
|-------------|--------|------------|
| Process GitHub issue with YouTube URL | ğŸ”² | Manual test with test video |
| Verify company is CNCF member | ğŸ”² | Test with Intuit (member) and fake company |
| Generate case study in CNCF style | ğŸ”² | Compare with existing case studies |
| Create pull request automatically | ğŸ”² | Verify PR created with correct files |

### Quality Requirements

| Requirement | Threshold | Validation |
|-------------|-----------|------------|
| Quality score | â‰¥ 0.60 | Run validator on generated case study |
| All sections present | 4 sections | Background, Challenge, Solution, Impact |
| CNCF projects mentioned | â‰¥ 2 | Parse markdown, count project names |
| Quantitative metrics | â‰¥ 1 | Parse markdown, find bold numbers |
| Word count | 500-1500 | Count words in generated content |

### Performance Requirements

| Metric | Target | Max |
|--------|--------|-----|
| End-to-end pipeline | < 2 min | 5 min |
| YouTube data fetch | < 5 sec | 10 sec |
| Company verification | < 2 sec | 5 sec |
| Case study generation | < 30 sec | 60 sec |

### Success Metrics (Post-Launch)

**Development:**
- âœ… Complete implementation in 12-15 days
- âœ… Total Python code < 300 lines
- âœ… All integration tests passing

**Operation:**
- âœ… Generate 10+ case studies per month
- âœ… Quality score average â‰¥ 0.70
- âœ… 90% of PRs require only minor edits
- âœ… < 10% false rejections (wrong company verification)

---

## References

### CNCF Resources

- **YouTube Channel:** https://www.youtube.com/@cncf/videos
- **Landscape:** https://landscape.cncf.io
- **Landscape GitHub:** https://github.com/cncf/landscape
- **Landscape YAML:** https://raw.githubusercontent.com/cncf/landscape/master/landscape.yml
- **Case Studies:** https://www.cncf.io/case-studies/
- **Glossary:** https://glossary.cncf.io

### GitHub Copilot Documentation

- **Custom Agents:** https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent/create-custom-agents
- **Agent Skills:** https://docs.github.com/en/copilot/concepts/agents/about-agent-skills
- **Agent Skills Standard:** https://github.com/agentskills/agentskills
- **Environment Setup:** https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent/customize-the-agent-environment
- **Custom Agents Config Reference:** https://docs.github.com/en/copilot/reference/custom-agents-configuration
- **Repository Instructions:** https://docs.github.com/en/copilot/how-tos/configure-custom-instructions/add-repository-instructions

### Python Libraries

- **Typer (CLI):** https://typer.tiangolo.com/
- **youtube-transcript-api:** https://github.com/jdepoix/youtube-transcript-api
- **google-api-python-client:** https://github.com/googleapis/google-api-python-client
- **rapidfuzz:** https://github.com/maxbachmann/RapidFuzz
- **PyYAML:** https://pyyaml.org/
- **httpx:** https://www.python-httpx.org/
- **Jinja2:** https://jinja.palletsprojects.com/
- **Pydantic:** https://docs.pydantic.dev/
- **pytest:** https://docs.pytest.org/

### Test Video

**URL:** https://www.youtube.com/watch?v=V6L-xOUdoRQ  
**Title:** "How Intuit Manages Cloud Resources Via GitOps - Jerome Kuptz & Ameen Radwan, Intuit"  
**Company:** Intuit (verified CNCF end-user member)  
**Projects:** Kubernetes, Argo CD, Helm, Terraform  
**Expected Metrics:** 3+ quantitative improvements  
**Expected Quality Score:** â‰¥ 0.75

---

## Design Principles Recap

### 1. Simplicity First
- Minimal Python code (~300 lines total)
- No custom NLP pipelines
- No hardcoded AI model selection
- Simple regex-based parsing where sufficient

### 2. Agent-Centric Architecture
- Custom agent orchestrates entire workflow
- Agent executes Python tools directly
- Agent applies AI skills automatically
- GitHub Actions only provides environment

### 3. Fail-Fast Validation
- Stop early if video invalid
- Stop early if company not member
- Stop early if quality too low
- Clear error messages to user

### 4. Leverage Copilot
- Let Copilot handle all AI tasks
- Copilot chooses best model (auto selection)
- Skills are easy to update (just edit markdown)
- No AI SDKs needed in Python

### 5. Maintainability
- Small, focused files (~50-100 lines each)
- Clear interfaces between components
- Integration tests > unit tests
- Documentation with examples
- Manual testing for AI components

---

**End of Design Document**

**Status:** âœ… Ready for Implementation  
**Last Updated:** February 9, 2026  
**Next Step:** Phase 1, Day 1 - Project Setup
